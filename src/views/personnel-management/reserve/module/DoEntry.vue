<template>
  <a-modal
    :title="modalTitle"
    :width="1000"
    :visible="visible"
    @ok="handleOk"
    @cancel="handleCancel"
    :maskClosable="false"
    :confirmLoading="spinning"
  >
    <a-spin :spinning="spinning">
      <a-form :form="form" class="do_entry_form-wrapper">
        <a-tabs :activeKey="String(activeKey)" default-active-key="1" @change="callback">
          <a-tab-pane key="1">
            <span slot="tab" class="requiredMark">基本信息</span>
            <table class="custom-table custom-table-border">
              <tr>
                <td class="requiredMark">姓名</td>
                <td>
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'trueName',
                        {
                          rules: [
                            { required: true, message: '请输入姓名' },
                            { max: 20, message: '最多可输入20个字符' },
                          ],
                        },
                      ]"
                    />
                  </a-form-item>
                </td>
                <td class="requiredMark">性别</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="['sex', { initialValue: 0, rules: [{ required: false, message: '选择性别' }] }]"
                      placeholder="选择性别"
                    >
                      <a-select-option :value="1">男</a-select-option>
                      <a-select-option :value="0">女</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
                <td class="requiredMark">籍贯</td>
                <td>
                  <a-form-item>
                    <a-cascader
                      :disabled="isView"
                      v-decorator="['birthplace', { rules: [{ required: true, message: '输入籍贯' }] }]"
                      :options="birthplaceOptions"
                      @change="birthplaceCascaderChange"
                      :loadData="birthplaceCascaderLoadData"
                      placeholder="输入籍贯"
                    />
                  </a-form-item>
                </td>
              </tr>
              <tr>
                <td class="requiredMark">身份证号</td>
                <td>
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      @blur="validateIdentityCard"
                      v-decorator="['identityCard', { rules: [{ required: true, message: '输入身份证号' }] }]"
                      placeholder="输入身份证号"
                    />
                  </a-form-item>
                </td>
                <td title="根据身份证号码自动填充出生日期">出生日期</td>
                <td title="根据身份证号码自动填充出生日期">
                  <a-form-item>
                    <a-date-picker
                      disabled
                      style="width: 100%"
                      v-decorator="['birthDate', { rules: [{ required: false, message: '输入出生日期' }] }]"
                      format="YYYY-MM-DD"
                      title="根据身份证号码自动填充出生日期"
                    />
                  </a-form-item>
                </td>
                <td>政治面貌</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="[
                        'politicsStatus',
                        { initialValue: 0, rules: [{ required: false, message: '选择政治面貌' }] },
                      ]"
                      placeholder="选择政治面貌"
                    >
                      <a-select-option :value="0">无</a-select-option>
                      <a-select-option :value="1">团员</a-select-option>
                      <a-select-option :value="2">党员</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td>婚姻状况</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="[
                        'maritalStatus',
                        { initialValue: 0, rules: [{ required: false, message: '选择政治面貌' }] },
                      ]"
                      placeholder="选择政治面貌"
                    >
                      <a-select-option :value="0">未婚</a-select-option>
                      <a-select-option :value="1">已婚</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
                <td>生育状况</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="[
                        'fertilityStatus',
                        { initialValue: 0, rules: [{ required: false, message: '选择生育状况' }] },
                      ]"
                      placeholder="选择生育状况"
                    >
                      <a-select-option :value="0">未育</a-select-option>
                      <a-select-option :value="1">已育</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
                <td class="requiredMark">文化程度</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="['educationId', { rules: [{ required: true, message: '选择文化程度' }] }]"
                      placeholder="选择文化程度"
                    >
                      <a-select-option v-for="(item, index) in education" :key="index" :value="item.id">{{
                        item.text
                      }}</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td class="requiredMark">毕业院校</td>
                <td>
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'school',
                        {
                          rules: [
                            { required: false, message: '输入毕业院校' },
                            { max: 30, message: '最多可输入30个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入毕业院校"
                    />
                  </a-form-item>
                </td>
                <td class="requiredMark">专业</td>
                <td>
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'major',
                        {
                          rules: [
                            { required: true, message: '输入专业' },
                            { max: 30, message: '最多可输入30个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入专业"
                    />
                  </a-form-item>
                </td>
                <td class="requiredMark">工作年限</td>
                <td>
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="['workingLife', { rules: [{ required: true, message: '输入工作年限' }] }]"
                      placeholder="输入工作年限"
                    />
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td class="requiredMark">紧急联系人</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'emergencyContact',
                        {
                          rules: [
                            { required: true, message: '输入紧急联系人' },
                            { max: 20, message: '最多可输入20个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入紧急联系人"
                    />
                  </a-form-item>
                </td>
                <td class="requiredMark">紧急联系电话</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'emergencyTelephone',
                        {
                          rules: [
                            { required: true, message: '输入紧急联系电话' },
                            { pattern: /^1\d{10}$/, message: '请输入正确的手机号' },
                          ],
                        },
                      ]"
                      placeholder="输入紧急联系电话"
                    />
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td class="requiredMark">手机(私)</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'privateMobile',
                        {
                          rules: [
                            { required: true, message: '输入手机' },
                            { pattern: /^1\d{10}$/, message: '请输入正确的手机号' },
                          ],
                        },
                      ]"
                      placeholder="输入手机"
                    />
                  </a-form-item>
                </td>
                <td>QQ(私)</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'privateQqNum',
                        {
                          rules: [
                            { required: false, message: '输入QQ' },
                            { max: 30, message: '最多可输入30个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入QQ"
                    />
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td>微信(私)</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'privateWxNum',
                        {
                          rules: [
                            { required: false, message: '输入微信' },
                            { max: 30, message: '最多可输入30个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入微信"
                    />
                  </a-form-item>
                </td>
                <td>邮箱(私)</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'privateEmail',
                        {
                          rules: [
                            { required: false, message: '输入邮箱' },
                            { pattern: /^[0-9a-z]+\w*@([0-9a-z]+\.)+[0-9a-z]+$/, message: '请填写正确电子邮箱' },
                            { max: 50, message: '最多可输入50个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入邮箱"
                    />
                  </a-form-item>
                </td>
              </tr>
              <tr>
                <td class="requiredMark">现居住地</td>
                <td colspan="5">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'nowAbode',
                        {
                          rules: [
                            { required: true, message: '输入现居住地' },
                            { max: 50, message: '最多可输入50个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入现居住地"
                    />
                  </a-form-item>
                </td>
              </tr>
              <tr>
                <td class="requiredMark">是否有关联用户</td>
                <td colspan="5">
                  <a-form-item>
                    <a-radio-group
                      :disabled="isView"
                      @change="relationChange"
                      name="haveSecurity"
                      v-decorator="[
                        'relationFlag',
                        { initialValue: 0, rules: [{ required: true, message: '选择是否有关联用户' }] },
                      ]"
                    >
                      <a-radio :value="0">否</a-radio>
                      <a-radio :value="1">是</a-radio>
                    </a-radio-group>
                  </a-form-item>
                </td>
              </tr>
              <tr v-if="isrelation">
                <td class="requiredMark">关联用户类型</td>
                <td colspan="2">
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="[
                        'relationType',
                        { initialValue: 1, rules: [{ required: true, message: '选择用户类型' }] },
                      ]"
                      placeholder="选择用户类型"
                    >
                      <a-select-option :value="1">公号</a-select-option>
                      <a-select-option :value="2">私号</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
                <td>关联用户</td>
                <td colspan="2">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      placeholder="关联用户"
                      read-only
                      @click="openSystemUsers()"
                      v-decorator="['relationUserId', { rules: [{ required: true, message: '关联用户' }] }]"
                    />
                  </a-form-item>
                </td>
              </tr>
            </table>
          </a-tab-pane>
          <a-tab-pane key="2" force-render>
            <span slot="tab" class="requiredMark">职工信息</span>
            <table class="custom-table custom-table-border">
              <tr>
                <td>工号</td>
                <td>
                  <a-form-item>
                    <a-input
                      :disabled="isView || isRuzhi"
                      v-decorator="['jobNum', { rules: [{ required: false, message: '输入工号' }] }]"
                      placeholder="输入工号"
                    />
                  </a-form-item>
                </td>
                <td>照片</td>
                <td>
                  <a-form-item>
                    <a-input
                      disabled
                      type="hidden"
                      v-decorator="['faceCode', { rules: [{ required: false, message: '输入人脸识别号' }] }]"
                      placeholder="输入人脸识别号"
                    />
                  </a-form-item>
                  <a-form-item>
                    <div class="clearfix">
                      <a-upload
                        :disabled="isView"
                        accept="multiple"
                        name="files"
                        :action="this.uploadPath"
                        listType="picture-card"
                        :fileList="fileList"
                        @preview="handlePreview"
                        @change="handleChange"
                      >
                        <div v-if="fileList.length < 1">
                          <a-icon type="plus" />
                          <div class="ant-upload-text">选择图片</div>
                        </div>
                      </a-upload>
                      <a-modal :visible="previewVisible" :footer="null" @cancel="previewCancel" :maskClosable="false">
                        <img alt="图片" style="width: 100%" :src="previewImage" />
                      </a-modal>
                    </div>
                    <a-input type="hidden" v-decorator="['headUrl']" />
                  </a-form-item>
                </td>
              </tr>
              <tr>
                <td class="requiredMark">部门</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      @change="departmentChange"
                      v-decorator="['departmentId', { rules: [{ required: true, message: '选择部门' }] }]"
                      placeholder="选择部门"
                    >
                      <a-select-option v-for="(item, index) in departmentDataSource" :key="index" :value="item.id">{{
                        item.departmentName
                      }}</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
                <td class="requiredMark">岗位</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      v-decorator="['stationId', { rules: [{ required: true, message: '选择岗位' }] }]"
                      placeholder="选择岗位"
                    >
                      <a-select-option v-for="(item, index) in stationDataSource" :key="index" :value="item.id">{{
                        item.stationName
                      }}</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
              </tr>
              <tr>
                <td v-if="stationInfoRequire.mobile">手机(公)</td>
                <td v-if="stationInfoRequire.mobile">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'mobile',
                        {
                          rules: [
                            { required: false, message: '输入手机' },
                            { pattern: /^1\d{10}$/, message: '请输入正确的手机号' },
                          ],
                        },
                      ]"
                      placeholder="输入手机"
                    />
                  </a-form-item>
                </td>
                <td v-if="stationInfoRequire.qqNum">QQ(公)</td>
                <td v-if="stationInfoRequire.qqNum">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'qqNum',
                        {
                          rules: [
                            { required: false, message: '输入QQ' },
                            { max: 30, message: '最多可输入30个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入QQ"
                    />
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td v-if="stationInfoRequire.wxNum">微信(公)</td>
                <td v-if="stationInfoRequire.wxNum">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'wxNum',
                        {
                          rules: [
                            { required: false, message: '输入微信' },
                            { max: 30, message: '最多可输入30个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入微信"
                    />
                  </a-form-item>
                </td>
                <td v-if="stationInfoRequire.email">邮箱(公)</td>
                <td v-if="stationInfoRequire.email">
                  <a-form-item>
                    <a-input
                      :disabled="isView"
                      v-decorator="[
                        'email',
                        {
                          rules: [
                            { required: false, message: '输入邮箱' },
                            { pattern: /^[0-9a-z]+\w*@([0-9a-z]+\.)+[0-9a-z]+$/, message: '请填写正确电子邮箱' },
                            { max: 50, message: '最多可输入50个字符' },
                          ],
                        },
                      ]"
                      placeholder="输入邮箱"
                    />
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td>银行卡</td>
                <td colspan="3">
                  <BankChoice ref="bankChoice" :bankInfo="bankInfo" :disabled="isView" />
                </td>
              </tr>

              <tr>
                <td>车牌号</td>
                <td colspan="3" style="padding: 0">
                  <table class="custom-table custom-table-border" style="margin: -1px">
                    <tr>
                      <td>常用</td>
                      <td>
                        <a-form-item>
                          <a-input
                            :disabled="isView"
                            v-decorator="[
                              'licensePlateNum',
                              {
                                rules: [
                                  { required: false, message: '输入常用车牌号' },
                                  { max: 10, message: '最多可输入10个字符' },
                                  {
                                    pattern: /^[^\s]*$/,
                                    message: '禁止输入空格',
                                  },
                                ],
                              },
                            ]"
                            placeholder="输入常用车牌号"
                          />
                        </a-form-item>
                      </td>
                    </tr>
                    <tr>
                      <td>备用</td>
                      <td>
                        <a-form-item>
                          <a-input
                            :disabled="isView"
                            v-decorator="[
                              'spareLicensePlateNum',
                              {
                                rules: [
                                  { required: false, message: '输入备用车牌号' },
                                  { max: 10, message: '最多可输入10个字符' },
                                  {
                                    pattern: /^[^\s]*$/,
                                    message: '禁止输入空格',
                                  },
                                ],
                              },
                            ]"
                            placeholder="输入备用车牌号"
                          />
                        </a-form-item>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>

              <tr>
                <td class="requiredMark">入职日期</td>
                <td>
                  <a-form-item>
                    <a-date-picker
                      style="width: 100%"
                      :disabled="isView"
                      v-decorator="[
                        'entryDate',
                        { initialValue: moment(), rules: [{ required: true, message: '输入入职日期' }] },
                      ]"
                      format="YYYY-MM-DD"
                    />
                  </a-form-item>
                </td>
                <td class="requiredMark">是否缴纳社保</td>
                <td>
                  <a-form-item>
                    <a-radio-group
                      :disabled="isView"
                      name="haveSecurity"
                      v-decorator="[
                        'haveSecurity',
                        { initialValue: 1, rules: [{ required: true, message: '选择是否缴纳社保' }] },
                      ]"
                    >
                      <a-radio :value="2">否</a-radio>
                      <a-radio :value="1">是</a-radio>
                    </a-radio-group>
                  </a-form-item>
                </td>
              </tr>

              <tr>
                <td class="requiredMark">试用期</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      @change="probationTypeChange"
                      v-decorator="[
                        'probationType',
                        { initialValue: 1, rules: [{ required: true, message: '选择试用期' }] },
                      ]"
                      placeholder="选择试用期"
                    >
                      <a-select-option :value="0">无</a-select-option>
                      <a-select-option :value="5">7天</a-select-option>
                      <a-select-option :value="1">1个月</a-select-option>
                      <a-select-option :value="2">2个月</a-select-option>
                      <a-select-option :value="3">3个月</a-select-option>
                      <!--                <a-select-option :value="4">考察期</a-select-option>-->
                    </a-select>
                  </a-form-item>
                </td>
                <td>员工简历</td>
                <td colspan="3">
                  <a type="primary" @click="doAction(department.resume)" target="_blank">查看</a>
                </td>
              </tr>

              <tr>
                <td class="requiredMark">员工状态</td>
                <td>
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      placeholder="员工状态"
                      v-decorator="[
                        'positionStatus',
                        { initialValue: 1, rules: [{ required: true, message: '输入员工状态' }] },
                      ]"
                    >
                      <a-select-option :value="1">试用期</a-select-option>
                      <a-select-option :value="2" :disabled="!isEdit">试用期不通过</a-select-option>
                      <a-select-option :value="3">在职</a-select-option>
                      <a-select-option :value="4" :disabled="!isEdit">离职</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
                <td class="requiredMark">薪资制度</td>
                <td colspan="3">
                  <a-form-item>
                    <a-select
                      :disabled="isView"
                      @change="salaryTypeChange"
                      v-decorator="[
                        'salaryType',
                        { initialValue: 0, rules: [{ required: true, message: '选择薪资制度' }] },
                      ]"
                      placeholder="选择薪资制度"
                    >
                      <a-select-option :value="0">月薪制</a-select-option>
                      <a-select-option :value="1">年薪制</a-select-option>
                    </a-select>
                  </a-form-item>
                </td>
              </tr>
              <template v-if="monthlyCycle">
                <tr>
                  <td class="requiredMark">周期</td>
                  <td>
                    <a-form-item>
                      <a-input disabled v-decorator="['cycle', { initialValue: 1 }]" />
                    </a-form-item>
                  </td>
                </tr>
              </template>
              <template v-else>
                <tr>
                  <td class="requiredMark">年薪类型</td>
                  <td>
                    <a-form-item>
                      <a-select
                        :disabled="isView"
                        @change="yearSalaryIdChange"
                        v-decorator="['yearSalaryId', { rules: [{ required: true, message: '选择年薪类型' }] }]"
                        placeholder="选择年薪类型"
                      >
                        <a-select-option v-for="(item, index) in annual" :key="index" :value="item.id">{{
                          item.ruleName
                        }}</a-select-option>
                      </a-select>
                    </a-form-item>
                  </td>
                  <td class="requiredMark">年/周期薪资(万元)</td>
                  <td colspan="3">
                    <a-form-item>
                      <a-input-number
                        style="width: 100%"
                        :disabled="isView"
                        :precision="2"
                        v-decorator="[
                          'cycleSalary',
                          {
                            rules: [{ required: true, message: '输入年/周期薪资(万元)' }],
                          },
                        ]"
                        placeholder="输入年/周期薪资(万元)"
                      />
                    </a-form-item>
                  </td>
                </tr>
                <tr>
                  <td class="requiredMark">周期</td>
                  <td>
                    <a-form-item>
                      <a-select
                        :disabled="isView"
                        v-decorator="['cycle', { rules: [{ required: true, message: '选择周期' }] }]"
                        placeholder="选择周期"
                      >
                        <a-select-option v-for="item in cycle" :key="item" :value="item">{{ item }}</a-select-option>
                      </a-select>
                    </a-form-item>
                  </td>
                  <td class="requiredMark">核算开始日期</td>
                  <td colspan="3">
                    <a-form-item>
                      <a-date-picker
                        :disabled="isView"
                        placeholder="核算开始日期"
                        v-decorator="['cycleTime', { rules: [{ required: true, message: '请选择开始日期' }] }]"
                        style="width: 100%"
                      />

                      <!-- <a-select
                        :disabled="isView"
                        v-decorator="['cycle', { rules: [{ required: true, message: '选择周期' }] }]"
                        placeholder="选择周期"
                      >
                        <a-select-option v-for="item in cycle" :key="item" :value="item">{{ item }}</a-select-option>
                      </a-select> -->
                    </a-form-item>
                  </td>
                </tr>
              </template>

              <tr>
                <td>个人印章</td>
                <td>
                  <a-form-item>
                    <div class="clearfix">
                      <a-upload
                        :disabled="isView"
                        accept="multiple"
                        name="files"
                        :action="this.uploadPath"
                        listType="picture-card"
                        :fileList="fileListSeal"
                        @preview="handlePreviewSeal"
                        @change="handleChangeSeal"
                      >
                        <div v-if="fileListSeal.length < 1">
                          <a-icon type="plus" />
                          <div class="ant-upload-text">选择图片</div>
                        </div>
                      </a-upload>
                      <a-modal
                        :visible="previewVisibleSeal"
                        :footer="null"
                        @cancel="previewCancelSeal"
                        :maskClosable="false"
                      >
                        <img alt="图片" style="width: 100%" :src="previewImageSeal" />
                      </a-modal>
                    </div>
                    <a-input type="hidden" v-decorator="['sealUrl']" />
                  </a-form-item>
                </td>
                <td colspan="2"></td>
              </tr>
              <XdocView ref="xdocView" />
            </table>
          </a-tab-pane>
          <a-tab-pane key="3">
            <span slot="tab" class="requiredMark">合同信息</span>
            <h3>合同模板</h3>
            <table class="custom-table custom-table-border">
              <tr v-for="(item, index) in todayList" :key="index">
                <td>
                  <a :href="item.contractUrl">{{ item.contractName }}</a>
                </td>
                <td>
                  <template v-if="isEdit || isRuzhi">
                    <Mdeol
                      ref="mdeol"
                      @getmsg="getChildMsg"
                      :msg="item.id"
                      :name="item.contractName"
                      :fileName="fileUrlType"
                    />
                  </template>
                </td>
              </tr>
            </table>
            <h3>合同原件</h3>
            <table class="custom-table custom-table-border">
              <tr>
                <th>合同名称</th>
                <th>操作</th>
              </tr>
              <tr v-for="(item, index) in todauuplate" :key="index">
                <td>{{ item.templateName }}</td>
                <td>
                  <a type="primary" @click="doAction(item.fileUrl)" target="_blank">查看</a>
                  <template v-if="isEdit || isRuzhi">
                    <a-divider type="vertical" />
                    <a type="primary" @click="deletes(index)">删除</a>
                  </template>
                </td>
              </tr>
            </table>
            <XdocView ref="xdocView" />
          </a-tab-pane>
          <a-tab-pane key="4" tab="证件信息">
            <h1>普通证件 <a-button type="link" @click="gaoPaiYiDevicesClickHandler"> 拍照上传 </a-button></h1>
            <UploadP ref="normalCard" :msgId="certificateList" :name="type" />
            <!-- <a-button @click="gaoPaiYiDevicesClickHandler">拍照上传</a-button> -->
            <GaoPaiYiDevices ref="gaoPaiYiDevices" @change="gaoPaiYiDevicesChange" />
            <h1>专业证件 <a-button type="link" @click="gaoPaiYiDevicesClickZhuanye"> 拍照上传 </a-button></h1>
            <UploadZ ref="normalUpload" :msgId="specialList" :name="type" />
            <!-- <a-button @click="gaoPaiYiDevicesClickZhuanye">拍照上传</a-button>  -->
          </a-tab-pane>
        </a-tabs>
        <SystemUserSelect ref="systemUserSelect" @selectSystemUsers="selectSystemUsers" />
      </a-form>
    </a-spin>
  </a-modal>
</template>

<script>
import { getUploadPath2, getUploadPath, getAreaByParent } from '@/api/common'
import { getDictionaryList } from '@/api/workBox'
import {
  departmentList, //所有部门
  getStationList, //获取所有岗位
} from '@/api/systemSetting'
import { comManageSettingsGetSettingsByStationId } from '@/api/communicationManagement'
import { Personnel_Reserve, annual_ruleList, annual_rulegetId } from '@/api/humanResources'
import { getReserveCondition } from '@/api/reserveApi'

//高拍仪组件
import GaoPaiYiDevices from '@/components/GaoPaiYiDevices/Index'
//base64上传接口
import { customUploadBase64 } from '@/api/common'
let uuid = () => Math.random().toString(32).slice(-10)

import moment from 'moment'

import {
  reserveGetDetail, //获取详细信息
  reserveDoEntry, //入职操作
  getFaceNo, //获取人脸识别码
  getEntityBeforeDetail, //入职操作时，回显之前储备的用户信息
  reserveUpdateEntity,
  reserveAddOrUpdate,
} from '@/api/reserveApi'
import SystemUserSelect from '@/components/CustomerList/SystemUserSelect'
import BankChoice from './BankChoice'
import Mdeol from './Model'
import UploadP from './UploadP'
import UploadZ from './UploadZ'
import XdocView from './xdocView'

function getBase64(img, callback) {
  const reader = new FileReader()
  reader.addEventListener('load', () => callback(reader.result))
  reader.readAsDataURL(img)
}

export default {
  name: '',
  components: {
    BankChoice: BankChoice,
    Mdeol,
    UploadP,
    UploadZ,
    XdocView,
    GaoPaiYiDevices,
    SystemUserSelect,
  },
  data() {
    return {
      selectSystem: {}, //关联用户信息
      selectSystemId: '',
      isrelation: false, // 是否显示管理用户
      cycle: [], //年薪周期
      annual: [], //年薪制规则
      visible: false,
      activeKey: 1,
      form: this.$form.createForm(this, { name: 'do_entry' }),
      type: 'view',
      birthplaceOptions: [], //籍贯 级联 省市
      education: [],
      departmentDataSource: [], //岗位
      stationDataSource: [], //部门
      record: {},
      bankInfo: [], //银行卡信息
      isProbationType4: true,
      loading: false,
      faceCode: '', //人脸识别码
      //上传照片部分
      uploadPath: getUploadPath(), // 上传图片的url
      insureType: '',
      fileList: [],
      previewVisible: false, // 图片预览框是否可见
      previewImage: '', //  预览图片的src值
      photoUrls: '', // 已经上传的照片的url
      //上传照片部分END
      //个人印章
      fileListSeal: [],
      previewVisibleSeal: false,
      previewImageSeal: '',
      //个人印章END
      todayList: [], // 合同模板列表
      todauuplate: [], //模板上传数组
      certificateList: [],
      specialList: [], //专业
      getChildMsgs: [],
      loading: false,
      imageUrl: '',
      spinning: false,
      department: {},
      fileTypes: undefined,
      arrNum: [],
      fileUrlType: [],
      monthlyCycle: true,
      stationInfoRequire: {
        email: false,
        mobile: false,
        phone: false,
        qqNum: false,
        wxNum: false,
      }, //判断该岗位是否配置公司 控制显示 手机号，微信，qq，邮箱 默认不显示
    }
  },
  computed: {
    isView() {
      return this.type === 'view'
    },
    isEdit() {
      return this.type === 'edit'
    },
    isRuzhi() {
      return this.type === 'ruzhi'
    },

    modalTitle() {
      return this.type === 'view' ? '查看' : '入职'
    },
  },
  mounted() {
    //this.init()
    annual_ruleList().then((res) => (this.annual = res.data))
  },
  methods: {
    moment: moment,
    //弹出用户列表
    openSystemUsers() {
      this.$refs.systemUserSelect.query(null)
    },
    //接受用户列表数据
    selectSystemUsers({ decoratorKey, record }) {
      console.log(decoratorKey, record)
      this.selectSystem = record
      this.selectSystemId = record.id
      this.form.setFieldsValue({
        relationUserId: record.trueName,
      })
    },
    //是否选择关联用户
    relationChange(e) {
      console.log(e.target.value)
      this.isrelation = e.target.value === 0 ? false : true
    },
    handlePreview(file) {
      // 点击文件链接或预览图标时的回调
      this.previewImage = file.url || file.thumbUrl
      this.previewVisible = true
    },
    callback(key) {
      let that = this
      this.activeKey = parseInt(key)
      let arr = this.form.getFieldsValue().haveSecurity
      if (key === '3') {
        Personnel_Reserve({
          departmentId: that.department.departmentId,
          stationId: that.department.stationId,
          insureType: this.form.getFieldsValue().haveSecurity,
        }).then((res) => {
          that.todayList = res.data
          console.log(res.data)
        })
      }
    },

    // 模板数据接收
    getChildMsg(data) {
      let that = this
      if (that.todauuplate.length == 0) {
        that.todauuplate.push(data)
      } else {
        let arr = that.todauuplate.some((item) => data.templateName === item.templateName)
        if (!arr) {
          that.todauuplate.push(data)
        } else {
          that.$message.error('不能重复上传同一个模板')
        }
      }
    },
    //删除上传模板
    deletes(i) {
      this.todauuplate.splice(i, 1)
    },
    // 文件预览
    doAction(idurl) {
      if (idurl) {
        this.$refs.xdocView.query(idurl)
      } else {
        this.$message.error('请上传简历')
      }
    },
    previewCancel() {
      this.previewVisible = false
    },
    handleChange({ file, fileList }) {
      // 上传中、完成、失败都会调用这个函数。
      console.log(fileList)
      if (file != null && file.status === 'done') {
        // 状态有：uploading done error removed
        if (file.response.code === 200) {
          // 成功
          this.form.setFieldsValue({
            headUrl: file.response.data[0].url,
          })
        }
      }
      this.fileList = fileList // 展示照片墙
    },

    handlePreviewSeal(file) {
      // 点击文件链接或预览图标时的回调
      this.previewImageSeal = file.url || file.thumbUrl
      this.previewVisibleSeal = true
    },
    previewCancelSeal() {
      this.previewVisibleSeal = false
    },
    handleChangeSeal({ file, fileList }) {
      // 上传中、完成、失败都会调用这个函数。
      console.log(fileList)
      if (file != null && file.status === 'done') {
        // 状态有：uploading done error removed
        if (file.response.code === 200) {
          // 成功
          this.form.setFieldsValue({
            sealUrl: file.response.data[0].url,
          })
        }
      }
      this.fileListSeal = fileList // 展示照片墙
    },
    init() {
      let that = this
      //所有省
      let task1 = function () {
        return new Promise((resolve, reject) => {
          getAreaByParent({ pId: 100000 }).then((res) => {
            that.birthplaceOptions = res.data.map((item) => {
              return {
                label: item.area,
                value: item.id,
                isLeaf: false,
              }
            })
            resolve('done')
          })
        })
      }
      //学历
      let task2 = function () {
        return new Promise((resolve, reject) => {
          getDictionaryList({ parentId: 1 }).then((res) => {
            that.education = res.data
            resolve('done')
          })
        })
      }
      //部门
      let task3 = function () {
        return new Promise((resolve, reject) => {
          departmentList().then((res) => {
            that.departmentDataSource = res.data.map((item) => Object.assign({}, item))
            resolve('done')
          })
        })
      }
      return Promise.all([task1(), task2(), task3()])
    },
    async query(type, record) {
      let that = this
      that.visible = true
      that.monthlyCycle = true
      that.type = type
      that.certificateList = []
      that.specialList = []
      that.todayList = []
      that.todauuplate = []
      that.record = Object.assign({}, record)
      that.form.resetFields()
      that.stationInfoRequire = {
        email: false,
        mobile: false,
        phone: false,
        qqNum: false,
        wxNum: false,
      }
      if (type === 'ruzhi') {
        this.isrelation = false
      }
      if (type === 'view' || type === 'ruzhi' || type === 'edit') {
        //人员状态：默认为0浏览，1试用期，2试用期不通过，3在职，4离职
        //0为入职前，其他的都为入职后
        // 合同模板接口
        that.activeKey = 1
        let isDoEntryBefore = record.status === 0 ? true : false
        let entryDetailApi = isDoEntryBefore ? getEntityBeforeDetail : reserveGetDetail
        entryDetailApi({ reserveId: record.id }).then((res) => {
          that.department = res.data
          if (res.data.contractDatalist) {
            that.todauuplate = res.data.contractDatalist
          }
          if (type === 'edit') {
            Personnel_Reserve({
              departmentId: that.department.departmentId,
              stationId: that.department.stationId,
              insureType: that.department.haveSecurity,
            }).then((res) => {
              that.todayList = res.data
            })
          }
          Personnel_Reserve({ departmentId: that.department.departmentId, stationId: that.department.stationId }).then(
            (res) => {
              if (res.code === 200 && res.data.length === 0) {
                this.$message.error('此岗位还没配置合同模板，请配置模板')
              }
            }
          )
          if (res.data.commonCertificateList) {
            that.certificateList = res.data.commonCertificateList.map((item) => {
              return {
                uid: item.id,
                fileType: item.fileType,
                name: '1',
                status: 'done',
                fileName: item.fileName,
                url: item.fileUrl,
              }
            })
          }
          if (res.data.specialCertificateList) {
            that.specialList = res.data.specialCertificateList.map((item) => {
              return {
                uid: item.id,
                fileName: item.fileName,
                fileType: item.fileType,
                name: '1',
                status: 'done',
                url: item.fileUrl,
              }
            })
          }
          that.fillData(isDoEntryBefore ? 'before' : 'after', res.data)
        })
      } else {
      }
    },
    async fillData(type, resultData) {
      let that = this
      await this.init()
      annual_rulegetId({ id: resultData.yearSalaryId }).then((res) => (this.cycle = res.data.accountCycle.split(',')))
      //before 入职前填充 after 入职后填充
      //if(type === 'before'){
      if (that.type === 'view' || that.type === 'edit') {
        if (resultData.relationFlag === 1) {
          that.selectSystemId = resultData.relationUserId || null
        }
        that.isrelation = resultData.relationFlag === 0 ? false : true
        resultData.relationUserId = resultData.relationUserName
        that.monthlyCycle = resultData.salaryType === 0 ? true : false
      }
      let isDoEntryBefore = that.record.status === 0 ? true : false
      if (resultData.salaryType === 1) {
        resultData.cycleTime = resultData.cycleTime ? moment(resultData.cycleTime) : moment()
      }
      // if(isDoEntryBefore){
      //   //人脸识别码
      //   getFaceNo().then(res =>{
      //     that.faceCode = res.data
      //     that.form.setFieldsValue({faceCode:that.faceCode})
      //   })
      // }

      let values = { ...resultData }

      //银行卡
      that.bankInfo = values.bankCardList || []
      //that.$nextTick(() => that.$refs.bankChoice.$forceUpdate())

      //values.trueName = values.name //姓名
      if (values.name) {
        values.trueName = values.name
      }
      values.birthDate = values.birthDate ? moment(values.birthDate) : moment()
      values.entryDate = values.entryDate ? moment(values.entryDate) : moment()

      let stationId = values.stationId

      await comManageSettingsGetSettingsByStationId({ id: stationId })
        .then((res) => {
          console.log(res)
          if (res && res.data) {
            that.stationInfoRequire = {
              email: !!res.data.email,
              mobile: !!res.data.mobile,
              phone: !!res.data.phone,
              qqNum: !!res.data.qqNum,
              wxNum: !!res.data.wxNum,
            }
          }
        })
        .catch((err) => console.log(err))

      delete values.birthplace

      if (values.headUrl) {
        const url = values.headUrl
        const file = url.split('/')
        const fileName = file[file.length - 1]
        that.fileList = [
          {
            uid: 0,
            name: fileName,
            status: 'done',
            url: values.headUrl,
          },
        ]
      }

      if (values.sealUrl) {
        const url = values.sealUrl
        const file = url.split('/')
        const fileName = file[file.length - 1]
        that.fileListSeal = [
          {
            uid: 0,
            name: fileName,
            status: 'done',
            url: values.sealUrl,
          },
        ]
      }

      if (isDoEntryBefore) {
        //点入职查看，需要把邮箱填充到 邮箱(私) 里面
        values.privateEmail = values.email || ''
        values.privateMobile = values.phone || ''
        delete values.email
        delete values.phone
      }

      try {
        //填充试用期
        that.isProbationType4 = +values.probationType === 4 ? false : true
      } catch (err) {
        console.log(err)
      }
      //填充其他
      that.$nextTick(() => {
        that.form.setFieldsValue(Object.assign({}, values))
        // try{
        //   let s = this.getBirthDay(values.identityCard)
        //   if(s){
        //     this.form.setFieldsValue({'birthDate':this.moment(s)})
        //   }
        // }catch(err){
        //   console.log(err)
        // }
      })
      //填充岗位
      if (values.departmentId) {
        that.departmentChange(values.departmentId).then(() => {
          that.form.setFieldsValue({ stationId: stationId })
        })
      }

      //that.$nextTick(() => that.bankInfo = values.bankCardList || [] )
      //填充籍贯
      let areaIds = values.areaIds
      if (areaIds) {
        let arrAreaIds = areaIds.split(',')
        let targetOption = that.birthplaceOptions.find((p) => p.value == arrAreaIds[0])
        getAreaByParent({ pId: arrAreaIds[0] }).then((res) => {
          //城市
          targetOption.loading = false
          targetOption.children = res.data.map((item) => {
            return { label: item.area, value: item.id, isLeaf: true }
          })
          that.birthplaceOptions = [...that.birthplaceOptions]
          that.$nextTick(() => that.form.setFieldsValue({ birthplace: arrAreaIds.map((n) => parseInt(n, 10)) }))
        })
      }
    },
    normFile(e) {
      console.log('Upload event:', e)
      if (Array.isArray(e)) {
        return e
      }
      return e && e.fileList
    },
    async handleOk() {
      let that = this
      if (that.isView) {
        that.visible = false
        return
      }
      let _bankChoiceResult = await that.$refs.bankChoice.validateFields()
      console.log('_bankChoiceResult', _bankChoiceResult)
      that.form.validateFields((err, values) => {
        if (!err) {
          if (_bankChoiceResult.err) {
            return
          }
          if ((this.type === 'ruzhi' || this.type === 'edit') && this.isrelation) {
            values.relationUserId = this.selectSystemId
          }
          if (this.type === 'edit' || this.type === 'ruzhi') {
            let arr1 = that.$refs.normalCard
              ? that.$refs.normalCard.getFiles().map((file) => {
                  if (file.name === '1') {
                    return {
                      fileUrl: file.url,
                      fileType: 2,
                      fileName: file.fileName,
                    }
                  }
                })
              : []
            arr1 = arr1.filter((item) => item)
            let arr = that.$refs.normalCard
              ? that.$refs.normalCard.getFiles().map((file) => {
                  if (file.response && file.response.code === 200 && file.name !== '1') {
                    let arr = {
                      fileUrl: file.response.data,
                      fileType: 2,
                      fileName: file.name,
                    }
                    return arr
                  }
                })
              : []
            arr = arr.filter((item) => item)
            let num1 = that.$refs.normalUpload
              ? that.$refs.normalUpload.getFiles().map((file) => {
                  if (file.name === '1') {
                    return {
                      fileUrl: file.url,
                      fileType: 3,
                      fileName: file.fileName,
                    }
                  }
                })
              : []
            num1 = num1.filter((item) => item)
            let num = that.$refs.normalUpload
              ? that.$refs.normalUpload.getFiles().map((file) => {
                  if (file.response && file.response.code === 200 && file.name !== '1') {
                    let arr = {
                      fileUrl: file.response.data,
                      fileType: 3,
                      fileName: file.name,
                    }
                    return arr
                  }
                })
              : []
            num = num.filter((item) => item)

            if (that.todauuplate || arr || num) {
              values.certificateSaveBoList = [...that.todauuplate, ...arr, ...num, ...arr1, ...num1]
            }
          }

          values.bankCardList = _bankChoiceResult.values.bank || []
          //values.nativePlace = '江苏徐州'
          if (values.entryDate) {
            values.entryDate = values.entryDate.format('YYYY-MM-DD')
          }

          if (values.birthDate) {
            values.birthDate = values.birthDate.format('YYYY-MM-DD')
            values.birthDate = values.birthDate.slice(0, 10)
          }
          if (values.cycleTime) {
            values.cycleTime = values.cycleTime.format('YYYY-MM-DD')
          }
          if (that.faceCode) {
            values.faceCode = that.faceCode
          }
          if (values.birthplace && values.birthplace.length && values.birthplace.length === 2) {
            let _birthplace = values.birthplace[values.birthplace.length - 1]
            values.nativePlace = _birthplace
            values.birthplace = _birthplace
          } else {
            values.nativePlace = ''
          }

          values.reserveId = that.record.id
          let isDoEntryBefore = that.record.status === 0 ? true : false

          if (that.type === 'edit' || that.type === 'add') {
            if (that.todauuplate.length < that.todayList.length || that.todauuplate.length === 0) {
              return that.$message.error('请上传所有模板')
            }
            let __api__ = isDoEntryBefore ? reserveAddOrUpdate : reserveUpdateEntity
            that.spinning = true
            __api__(values)
              .then((res) => {
                that.spinning = false
                if (res.code === 200) {
                  that.form.resetFields() // 清空表
                  that.fileList = []
                  that.previewImage = ''
                  that.photoUrls = ''
                  that.fileListSeal = []
                  that.previewCancelSeal = ''
                  that.visible = false

                  that.$message.success('操作成功')
                  that.$emit('finish')
                } else {
                  that.$message.warning(res.msg)
                }
              })
              .catch((err) => (that.spinning = false))
          } else if (that.type === 'ruzhi') {
            if (!isDoEntryBefore) {
              return that.$message.info('该人员已经办理入职了')
            }
            if (that.todauuplate.length < that.todayList.length || that.todauuplate.length === 0) {
              return that.$message.error('请上传所有模板')
            }
            that.spinning = true
            reserveDoEntry(values)
              .then((res) => {
                that.spinning = false
                if (res.code === 200) {
                  that.visible = false
                  that.$message.success('操作成功')
                  that.$emit('finish')
                } else {
                  that.$message.warning(res.msg)
                }
              })
              .catch((err) => (that.spinning = false))
          }
        }
      })
    },
    handleCancel() {
      this.form.resetFields()
      this.fileUrlType = []
      this.fileList = []
      this.fileListSeal = []
      this.todayList = []
      this.todauuplate = []
      this.certificateList = []
      this.specialList = []
      this.previewImage = ''
      this.previewCancelSeal = ''
      this.photoUrls = ''
      this.$nextTick(() => (this.visible = false))
      this.$refs.mdeol.info()
    },
    birthplaceCascaderChange(arrSelected) {
      console.log('birthplaceCascaderChange called...')
      console.log(arguments)
    },
    birthplaceCascaderLoadData(selectedOptions) {
      console.log(selectedOptions)
      let that = this
      const targetOption = selectedOptions[selectedOptions.length - 1]
      targetOption.loading = true
      return getAreaByParent({ pId: targetOption.value })
        .then((res) => {
          //城市
          targetOption.loading = false
          targetOption.children = res.data.map((item) => {
            return {
              label: item.area,
              value: item.id,
              isLeaf: true,
            }
          })
          that.birthplaceOptions = [...that.birthplaceOptions]
        })
        .catch(function (err) {
          console.log(err)
        })
    },
    departmentChange(departmentID) {
      return getStationList({ id: departmentID }).then((res) => {
        //岗位
        this.stationDataSource = res.data.map((item) => Object.assign({}, item))
      })
    },
    probationTypeChange(e) {
      //考察期需要手动输入
      this.isProbationType4 = parseInt(e, 10) === 4 ? false : true
      this.form.setFieldsValue({
        inspectMoth: '',
      })
    },
    salaryTypeChange(e) {
      if (e === 0) {
        this.monthlyCycle = true
        this.cycle = []
      } else {
        this.monthlyCycle = false
        this.form.setFieldsValue({ cycle: '' })
      }
    },
    yearSalaryIdChange(e) {
      let react = this.annual.find((item) => item.id === e)
      this.cycle = react.accountCycle.split(',')
    },

    validateIdentityCard(e) {
      console.log(e.target.value)
      let s = this.getBirthDay(e.target.value.trim())
      if (s) {
        this.form.setFieldsValue({ birthDate: this.moment(s) })
      }
    },
    getBirthDay(cardNo, format = 'YYYY-MM-DD') {
      if (typeof cardNo !== 'string') {
        console.log('cardNo参数必须是字符串')
        return
      }
      if (cardNo.length !== 15 && cardNo.length !== 18) {
        console.log('cardNo参数必须是15位或18位')
        return
      }
      let is15 = cardNo.length === 15 ? true : false
      let reg = is15 ? /\d{6}(\d{2})(\d{2})(\d{2})\d*/ : /\d{6}(\d{4})(\d{2})(\d{2})\d*/
      let result = cardNo.match(reg)
      if (result) {
        format = format.toUpperCase()
        let year = is15 ? '19' + result[1] : result[1]
        let month = result[2]
        let day = result[3]
        return format.replace('YYYY', year).replace('MM', month).replace('DD', day)
      }
      return
    },
    gaoPaiYiDevicesChange(result) {
      console.log(result)
      //result 参数 数据结构说明
      /**
       * type - 'pdf':'PDF文件','face':'人脸照片','video':'录像文件','photo':'照片文件'
       * url  - 上传后返回的 文件url
       */
      /**
       * type - idcard -身份证信息  idcardcopy -身份证复印件base64
       * data - {
            //0x19:'身份证功能启动成功',0x1a:'身份证功能启动失败',
            ICStartStatus: null, 
            //0x1b:'身份证读卡成功',0x1c:'身份证读卡失败',
            ICGetOneStatus: null,
            ICName: null, //姓名
            ICNumber: null, //身份证号码
            ICSex: null, //性别汉字  男or女
            ICNation: null, //民族
            ICBrithday: null, //出生日期
            ICAddr: null, //地址
            ICSignOrganization: null,//签发机关
            ICExpiryBeginDate: null,//生效日期
            ICExpiryEndDate: null,//过期日期
            ICModelNumber: null, //安全码
            ICPhoto: null, //身份证头像 base64 格式
          }
       */
      /**
       * idcardcopy -身份证复印件base64
       * data - base64格式图片
       */

      let { type, url, data } = result
      //#处理自己的逻辑
      //#处理自己的逻辑END
      if (type === 'photo' || type === 'face') {
        const file = result.url.split('/')
        const fileName = file[file.length - 1]
        if (this.fileTypes === 2) {
          this.certificateList.push({
            uid: uuid(),
            name: '1',
            fileName: fileName,
            status: 'done',
            fileType: this.fileTypes,
            url: result.url,
          })
        } else {
          this.specialList.push({
            uid: uuid(),
            name: '1',
            fileName: fileName,
            status: 'done',
            fileType: this.fileTypes,
            url: result.url,
          })
        }
      }
      //关闭高拍仪
      this.$refs.gaoPaiYiDevices.close()
    },
    gaoPaiYiDevicesClickZhuanye() {
      //打开高拍仪
      this.fileTypes = 3
      this.$refs.gaoPaiYiDevices.show()
    },
    gaoPaiYiDevicesClickHandler() {
      //打开高拍仪
      this.fileTypes = 2
      this.$refs.gaoPaiYiDevices.show()
    },
  },
}
</script>

<style scoped>
.requiredMark::before {
  display: inline-block;
  margin-right: 4px;
  color: #f5222d;
  font-size: 14px;
  font-family: SimSun, sans-serif;
  line-height: 1;
  content: '*';
}
.do_entry_form-wrapper >>> .ant-form-item {
  margin-bottom: 0;
}
.custom-table-border th,
.custom-table-border td {
  padding: 5px 10px;
}
.do_entry_form-wrapper >>> .ant-upload-list-picture-card .ant-upload-list-item-info:before {
  left: 0;
}
</style>
